/*! For license information please see setup.dev.js.LICENSE.txt */
!function(e){function n(n){for(var a,u,i=n[0],l=n[1],s=n[2],d=0,f=[];d<i.length;d++)u=i[d],Object.prototype.hasOwnProperty.call(r,u)&&r[u]&&f.push(r[u][0]),r[u]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(c&&c(n);f.length;)f.shift()();return o.push.apply(o,s||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],a=!0,i=1;i<t.length;i++){var l=t[i];0!==r[l]&&(a=!1)}a&&(o.splice(n--,1),e=u(u.s=t[0]))}return e}var a={},r={"pages/setup":0},o=[];function u(n){if(a[n])return a[n].exports;var t=a[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,u),t.l=!0,t.exports}u.m=e,u.c=a,u.d=function(e,n,t){u.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,n){if(1&n&&(e=u(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(u.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)u.d(t,a,function(n){return e[n]}.bind(null,a));return t},u.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(n,"a",n),n},u.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},u.p="/themes/core/static/js";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=n,i=i.slice();for(var s=0;s<i.length;s++)n(i[s]);var c=l;o.push(["./CTFd/themes/core/assets/js/pages/setup.js","helpers","vendor","default~pages/challenges~pages/main~pages/notifications~pages/scoreboard~pages/settings~pages/setup~~6822bf1f"]),t()}({"./CTFd/themes/core/assets/js/pages/setup.js":function(module,exports,__webpack_require__){eval('\n\n__webpack_require__(/*! ./main */ "./CTFd/themes/core/assets/js/pages/main.js");\n\nvar _jquery = _interopRequireDefault(__webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js"));\n\nvar _momentTimezone = _interopRequireDefault(__webpack_require__(/*! moment-timezone */ "./node_modules/moment-timezone/index.js"));\n\nvar _CTFd = _interopRequireDefault(__webpack_require__(/*! ../CTFd */ "./CTFd/themes/core/assets/js/CTFd.js"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction switchTab(event) {\n  event.preventDefault(); // Handle tab validation\n\n  var valid_tab = true;\n  (0, _jquery.default)(event.target).closest("[role=tabpanel]").find("input,textarea").each(function (i, e) {\n    $e = (0, _jquery.default)(e);\n    var status = e.checkValidity();\n\n    if (status === false) {\n      $e.removeClass("input-filled-valid");\n      $e.addClass("input-filled-invalid");\n      valid_tab = false;\n    }\n  });\n\n  if (valid_tab == false) {\n    return;\n  }\n\n  var href = (0, _jquery.default)(event.target).data("href");\n  (0, _jquery.default)(".nav a[href=\\"".concat(href, "\\"]")).tab("show");\n}\n\nfunction processDateTime(datetime) {\n  var date_picker = (0, _jquery.default)("#".concat(datetime, "-date"));\n  var time_picker = (0, _jquery.default)("#".concat(datetime, "-time"));\n  return function (event) {\n    var unix_time = (0, _momentTimezone.default)("".concat(date_picker.val(), " ").concat(time_picker.val()), "YYYY-MM-DD HH:mm").utc().format("X");\n    (0, _jquery.default)("#".concat(datetime, "-preview")).val(unix_time);\n  };\n}\n\nfunction mlcSetup(event) {\n  var params = {\n    name: (0, _jquery.default)("#ctf_name").val(),\n    type: "jeopardy",\n    description: (0, _jquery.default)("#ctf_description").val(),\n    user_mode: (0, _jquery.default)("#user_mode").val(),\n    event_url: window.location.origin + _CTFd.default.config.urlRoot,\n    redirect_url: window.location.origin + _CTFd.default.config.urlRoot + "/redirect",\n    integration_setup_url: window.location.origin + _CTFd.default.config.urlRoot + "/setup/integrations",\n    start: (0, _jquery.default)("#start-preview").val(),\n    end: (0, _jquery.default)("#end-preview").val(),\n    platform: "CTFd",\n    state: STATE\n  };\n  var ret = [];\n\n  for (var p in params) {\n    ret.push(encodeURIComponent(p) + "=" + encodeURIComponent(params[p]));\n  }\n\n  window.open("https://www.majorleaguecyber.org/events/new?" + ret.join("&"), "_blank");\n}\n\n(0, _jquery.default)(function () {\n  (0, _jquery.default)(".tab-next").click(switchTab);\n  (0, _jquery.default)("input").on("keypress", function (e) {\n    // Hook Enter button\n    if (e.keyCode == 13) {\n      e.preventDefault();\n      (0, _jquery.default)(e.target).closest(".tab-pane").find("button[data-href]").click();\n    }\n  });\n  (0, _jquery.default)("#integration-mlc").click(mlcSetup);\n  (0, _jquery.default)("#start-date,#start-time").change(processDateTime("start"));\n  (0, _jquery.default)("#end-date,#end-time").change(processDateTime("end"));\n  (0, _jquery.default)("#config-color-picker").on("input", function (e) {\n    (0, _jquery.default)("#config-color-input").val((0, _jquery.default)(this).val());\n  });\n  (0, _jquery.default)("#config-color-reset").click(function () {\n    (0, _jquery.default)("#config-color-input").val("");\n    (0, _jquery.default)("#config-color-picker").val("");\n  });\n  window.addEventListener("storage", function (event) {\n    if (event.key == "integrations" && event.newValue) {\n      var integration = JSON.parse(event.newValue);\n\n      if (integration["name"] == "mlc") {\n        (0, _jquery.default)("#integration-mlc").text("Already Configured").attr("disabled", true);\n        window.focus();\n        localStorage.removeItem("integrations");\n      }\n    }\n  });\n  (0, _jquery.default)("#setup-form").submit(function (e) {\n    if ((0, _jquery.default)("#newsletter-checkbox").prop("checked")) {\n      var email = (0, _jquery.default)(e.target).find("input[name=email]").val();\n\n      _jquery.default.ajax({\n        type: "POST",\n        url: "https://ctfd.us15.list-manage.com/subscribe/post-json?u=6c7fa6feeced52775aec9d015&id=dd1484208e&c=?",\n        data: {\n          EMAIL: email,\n          subscribe: "Subscribe",\n          b_6c7fa6feeced52775aec9d015_dd1484208e: ""\n        },\n        dataType: "jsonp",\n        contentType: "application/json; charset=utf-8"\n      });\n    }\n  });\n});\n\n//# sourceURL=webpack:///./CTFd/themes/core/assets/js/pages/setup.js?')}});