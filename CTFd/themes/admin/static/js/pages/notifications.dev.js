/*! For license information please see notifications.dev.js.LICENSE.txt */
!function(e){function n(n){for(var i,s,a=n[0],u=n[1],c=n[2],l=0,d=[];l<a.length;l++)s=a[l],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);for(f&&f(n);d.length;)d.shift()();return r.push.apply(r,c||[]),t()}function t(){for(var e,n=0;n<r.length;n++){for(var t=r[n],i=!0,a=1;a<t.length;a++){var u=t[a];0!==o[u]&&(i=!1)}i&&(r.splice(n--,1),e=s(s.s=t[0]))}return e}var i={},o={"pages/notifications":0},r=[];function s(n){if(i[n])return i[n].exports;var t=i[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=e,s.c=i,s.d=function(e,n,t){s.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,n){if(1&n&&(e=s(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)s.d(t,i,function(n){return e[n]}.bind(null,i));return t},s.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(n,"a",n),n},s.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},s.p="/themes/admin/static/js";var a=window.webpackJsonp=window.webpackJsonp||[],u=a.push.bind(a);a.push=n,a=a.slice();for(var c=0;c<a.length;c++)n(a[c]);var f=u;r.push(["./CTFd/themes/admin/assets/js/pages/notifications.js","helpers","vendor","default~pages/challenge~pages/challenges~pages/configs~pages/editor~pages/main~pages/notifications~p~d5a3cc0a"]),t()}({"./CTFd/themes/admin/assets/js/pages/notifications.js":function(module,exports,__webpack_require__){eval('\n\n__webpack_require__(/*! ./main */ "./CTFd/themes/admin/assets/js/pages/main.js");\n\n__webpack_require__(/*! core/utils */ "./CTFd/themes/core/assets/js/utils.js");\n\nvar _jquery = _interopRequireDefault(__webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js"));\n\nvar _CTFd = _interopRequireDefault(__webpack_require__(/*! core/CTFd */ "./CTFd/themes/core/assets/js/CTFd.js"));\n\nvar _ezq = __webpack_require__(/*! core/ezq */ "./CTFd/themes/core/assets/js/ezq.js");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction submit(event) {\n  event.preventDefault();\n  var $form = (0, _jquery.default)(this);\n  var params = $form.serializeJSON(); // Disable button after click\n\n  $form.find("button[type=submit]").attr("disabled", true);\n\n  _CTFd.default.api.post_notification_list({}, params).then(function (response) {\n    // Admin should also see the notification sent out\n    setTimeout(function () {\n      $form.find("button[type=submit]").attr("disabled", false);\n    }, 1000);\n\n    if (!response.success) {\n      (0, _ezq.ezAlert)({\n        title: "Error",\n        body: "Could not send notification. Please try again.",\n        button: "OK"\n      });\n    }\n  });\n}\n\nfunction deleteNotification(event) {\n  event.preventDefault();\n  var $elem = (0, _jquery.default)(this);\n  var id = $elem.data("notif-id");\n  (0, _ezq.ezQuery)({\n    title: "Delete Notification",\n    body: "Are you sure you want to delete this notification?",\n    success: function success() {\n      _CTFd.default.api.delete_notification({\n        notificationId: id\n      }).then(function (response) {\n        if (response.success) {\n          $elem.parent().remove();\n        }\n      });\n    }\n  });\n}\n\n(0, _jquery.default)(function () {\n  (0, _jquery.default)("#notifications_form").submit(submit);\n  (0, _jquery.default)(".delete-notification").click(deleteNotification);\n});\n\n//# sourceURL=webpack:///./CTFd/themes/admin/assets/js/pages/notifications.js?')}});